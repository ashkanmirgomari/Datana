{% extends "base.html" %}

{% block title %}Search{% endblock %}

{% block page_title %}Advanced Search{% endblock %}
{% block page_description %}Find records using multiple filters.{% endblock %}

{% block content %}
<div class="form-container" style="max-width: 800px; margin-bottom: 2rem;">
    <form method="POST">
        <div class="form-row">
            <div class="form-group">
                <label for="first_name">First Name</label>
                <input type="text" id="first_name" name="first_name">
            </div>
            
            <div class="form-group">
                <label for="last_name">Last Name</label>
                <input type="text" id="last_name" name="last_name">
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="city">City</label>
                <input type="text" id="city" name="city">
            </div>
            
            <div class="form-group">
                <label for="national_id">National ID</label>
                <input type="text" id="national_id" name="national_id">
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="phone">Phone</label>
                <input type="text" id="phone" name="phone">
            </div>
            
            <div class="form-group">
                <label for="mode">Search Mode</label>
                <select id="mode" name="mode">
                    <option value="and">AND (all filters)</option>
                    <option value="or">OR (any filter)</option>
                </select>
            </div>
        </div>
        
        <button type="submit" class="btn">Search</button>
    </form>
</div>

{% if search_performed %}
<div class="table-container">
    <div class="table-header">
        <h2>Search Results</h2>
        <span class="badge">Found: {{ results|length }}</span>
    </div>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>National ID</th>
                <th>Phone</th>
                <th>City</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {% for record in results %}
            <tr>
                <td><span class="record-id">{{ record.id }}</span></td>
                <td>{{ record.first_name }}</td>
                <td>{{ record.last_name }}</td>
                <td>{{ record.national_id or '-' }}</td>
                <td>{{ record.phone or '-' }}</td>
                <td>{{ record.address or '-' }}</td>
                <td><a href="{{ url_for('record_detail', record_id=record.id) }}" class="btn btn-secondary" style="padding: 0.25rem 0.75rem;">View</a></td>
            </tr>
            {% else %}
            <tr>
                <td colspan="7" style="text-align: center; color: #94a3b8;">No results found</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endif %}
{% endblock %}